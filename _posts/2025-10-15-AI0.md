---
layout: post
title: "AI 시스템 구현 (0) - 개요"
date: 2025-10-25
categories: [AI]
image: 
excerpt: ""
---
 전체적인 프로젝트의 목표를 위해 필요한 AI들을 정리해 보았다.  
직관적으로 생각해 보았을 때 필요한 AI의 종류는 2가지이다.
  
1. 플레이어의 역할을 하며 건물/유닛 생산, 업그레이드 등의 행동을 하는 메인 AI  
2. 플레이어와 메인 AI에 의해 소환되어 전투를 수행하는 유닛 AI
  
 이 두 가지를 염두에 두고 개발을 진행하였으나 몇 가지 문제가 발생하였는데, 바로 유닛 AI들간의 통신이 원활하지 않아서  
생기는 문제들이었다. 몇 가지 예를 들어보면
  
- 이미 다른 아군 유닛의 공격으로 쓰러진 상대 유닛이 '있는 것처럼' 행동 (ex.빈 자리에 다시 공격 수행)  
- 다른 아군 유닛의 위치 파악 불가. 그로 인해 여러 행동 패턴 결정에 장애가 생김.  
- '플레이어' 들이 보유한 각각의 유닛의 숫자와 상태 확인 불가. 그로 인해 메인 AI의 행동 결정에 에러가 발생.
  
 물론 이 문제들의 대부분은 메인 AI에 기능들을 추가하는 것으로 해결이 가능하다. 하지만 메인 AI의 코드가 난잡해질 수도 있고,  
결정적으로 유닛 AI의 행동패턴은 실제 플레이어와 메인 AI가 동일한 만큼 동일한 기능들을 다른 컨트롤러를 부모로 가진  플레이어와 메인 AI에 각각 구현해야 한다. 두 번 작업해야 한다는 것이다.
  
그러므로 메인 AI와 유닛 AI를 연결하는, 오직 전투를 수행하기 위한 보조 AI를 사이에 두어 유닛 AI 간 전장 상황 공유,  유닛 행동 순서 결정 등의 행동을 수행하게 한다. 해당 AI를 만들어 플레이어와 메인 AI에 붙이면 최소한의 작업으로  
원하는 목적을 달성할 수 있을 것으로 기대된다.
  
최종적으로  
'플레이어' - 메인 전투 AI - 각각의 유닛 AI들  
의 구조를 성립시키는 것을 목표로 하였다.  
  
다음은 각각의 AI의 행동 패턴 목표이다.  
  
-플레이어의 상대 역할을 하며 건물/유닛 생산, 업그레이드 등의 행동을 하는 메인 AI의 패턴  
1. 턴을 넘겨받으면 전투 AI 에게 행동 시작 명령을 내림  
2. 전투 AI의 행동 종료 신호를 받으면 자신의 행동 시작.  
3. 가중치에 따른 건물/유닛 생산, 업그레이드 등의 행동을 하며 모든 행동 종료 시 턴 종료. 플레이어에게 행동이 넘어감.  
  
-공격 유닛들의 행동을 통솔하는 전투 AI의 패턴  
1. 자신이 보유한 모든 공격 유닛 AI에게 시야의 적들을 탐지하는 행동 명령 후 적 유닛 목록을 전달받음.  
2. 공격 유닛 AI에게 행동권을 주고 결과(변동된 전장 상황 등)를 전달받음.  
3. 전달받은 상황을 다시 다음 공격 AI에게 전달 후 행동권을 줌.  
4. 2번과 3번을 모든 공격 유닛 AI에게 실행시킴.  
  
-공격 유닛 AI의 패턴  
1. 시야 안의 적들을 탐지해서 전투 AI에게 전송.  
2. 행동에 필요한 건물 위치, 적 위치 등의 전장 상황을 전투 AI에게 전달받음.  
3. 사거리 안의 적 탐지, 적이 사거리 안에 있을 경우 공격  
4. 사거리 안의 적이 없을 경우 이동, 이동 위치는 다음과 같은 우선순위 따름.  
 4-1.적 공격이 가능한 위치 중에서 가장 안전한 장소를 탐색 후 이동한 다음 공격  
 4-2. 적 공격이 가능한 위치가 없을 경우 이동 속도 * 2 의 범위에서 4-1의 조건을 만족하는 위치를 탐색 후 이동  
 4-3. 4-2 의 조건을 만족하는 위치가 없을 경우 상대 진영으로 최대한 이동  
5. 3번과 4번의 행동 후 변동된 전장 상황을 전투 AI에게 전송 후 행동 종료.  

